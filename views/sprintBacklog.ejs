<html lang="fr">
<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Collaboro | Sprint Backlog</title>
  <link rel="stylesheet" href="/assets/css/style.css">
  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="assets/js/navbar.js"></script>
</head>

<body>
  <div class="container-scroller  ">
    <!--navbar start-->
    <nav class="navbar  fixed-top navbar-light shadow-sm  d-flex  align-items-center ">
      <a class="navbar-brand " href="/dashboard">
        <img src="/assets/img/logo.png" class="d-inline-block align-top"> </a>
      <ul class="nav justify-content-end ">
        <li class="nav-item navbar-item">
          <a class="nav-link count-indicator " href="/chat">
            <i class="bi bi-envelope-fill mr-5 "></i>
            <span class="count1"></span>
          </a>
        </li>
        <li class="nav-item navbar-item">
          <a class="nav-link count-indicator " href="/notification">
            <i class="bi bi-bell-fill mr-4 "></i>
            <span class="count"></span>
          </a>
        </li>
        <li class="nav-item  mr-5 navbar-item">
          <a class="nav-link profile-photo " href="/EditMyProfile/<%= data._id%>"><img src="<%=data.photo%>">
          </a>
        </li>


      </ul>
    </nav>

    <!--navbar end-->
    <div class="container-fluid page-body-wrapper" id="chat-container">
      <!--sidebar start-->
      <nav class="sidebar shadow flex-row align-items-start mx-0 px-0  " id="sidebar">
        <ul class="nav" id="sidebar">
          <li class="nav-item nav-link">
            <button onclick="toggleNavbar()" class="btn btn-lg  " id="btnToggler"><i
                class="bi bi-arrow-return-left"></i></button>
          </li>
          <li class="nav-item  ">
            <a class="nav-link" href="/dashboard">
              <i class="bi bi-grid"></i>
              <span class="menu-title mx-2">Acceuil</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/projets">
              <i class="bi bi-code-square"></i>
              <span class="menu-title mx-2 ">Projets</span>
            </a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" data-toggle="collapse" href="/sprints">
              <i class="bi bi-code-square"></i>
              <span class="menu-title mx-2 ">Sprints</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/taches">
              <i class="bi bi-list-task"></i>
              <span class="menu-title mx-2">Tâches</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/meeting">
              <i class="bi bi-camera-video"></i>
              <span class="menu-title mx-2 ">Meeting</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/chat">
              <i class="bi bi-chat-left"></i>
              <span class="menu-title mx-2">Chat</span>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" data-toggle="collapse" href="/notification">
              <i class="bi bi-bell"></i>
              <span class="menu-title mx-2">Notification</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/EditMyProfile">
              <i class="bi bi-people"></i>
              <span class="menu-title mx-2">Profil</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/documentation">
              <i class="bi bi-book"></i>
              <span class="menu-title mx-2">Documentation</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/logout">
              <i class="bi bi-box-arrow-left"></i>
              <span class="menu-title mx-2">Déconnexion</span>
            </a>
          </li>
        </ul>
      </nav>
      <nav class="mobile-sidebar shadow  flex-row align-items-start mx-0 px-0    " id="mobile-sidebar">
        <ul class="nav">
          <li class="nav-item">
            <button onclick="toggleNavbar()" class="btn btn-lg " id="btnToggler"><i
                class="bi bi-arrow-return-right"></i></button>
          </li>
          <li class="nav-item  ">
            <a class="nav-link" href="/dashboard">
              <i class="bi bi-grid"></i>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" data-toggle="collapse" href="/projets">
              <i class="bi bi-code-square"></i>
            </a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" data-toggle="collapse" href="/sprints">
              <i class="bi bi-arrow-repeat"></i>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/taches">
              <i class="bi bi-list-task"></i>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/meeting">
              <i class="bi bi-camera-video"></i>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/chat">
              <i class="bi bi-chat-left"></i>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" data-toggle="collapse" href="/notification">
              <i class="bi bi-bell"></i>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/EditMyProfile">
              <i class="bi bi-people"></i>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/documentation">
              <i class="bi bi-book"></i>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="/logout">
              <i class="bi bi-box-arrow-left"></i>
            </a>
          </li>
        </ul>
      </nav>
      <%let waiting=0,progress=0,done=0;
      for(var k=0;k<tasks.length;k++)
      {
        if(tasks[k].statut=="En attente")
        {
          waiting++;
        }
        else if (tasks[k].statut=="En progression")
        {
          progress++;
        }
        else
        {
          done++;
        }
      }
      %>
      <div class=" container-fluid main-panel" id="main-panel-home">
        <div class="content-wrapper" id="main-panel-wrapper">
          <!--First row start-->
          <div class="row  ">
            <div class="col px-2 title">
              <h4>Rapport Quotidien</h5>
            </div>
          </div>
          <div class="row p-0">
                <div class="col m-1 p-2 mt-2 projectInfosContainer d-flex flex-column justify-content-around">
                <p class="h5 text-muted"><span class=" h1 PageTitle" style="color:#FF8368"><%=waiting%></span> Tâches en attente </p>
                </div>
                <div class="col m-1 p-2 mt-2 projectInfosContainer d-flex flex-column justify-content-around">
                  <p class="h5 text-muted"><span class=" h1 PageTitle" style="color:#8A81B5"><%=progress%></span> Tâches en cours </p>
                  </div>
                  <div class="col m-1 p-2 mt-2 projectInfosContainer d-flex flex-column justify-content-around">
                    <p class="h5 text-muted"><span class=" h1 PageTitle" style="color:#6ABAA4"><%=done%></span> Tâches terminées </p>
                    </div>
          </div>
          <div class="row  ">
            <div class="col px-2 ">
              <h4>Sprint Backlog</h5>
            </div>
          </div>
          <div class="row m-0  mt-2 p-0 tasks ">
            <div class="col d-flex flex-column waitingTasks  dropZone" id="En attente">
              <div class="col tasksTitle m-0 d-flex flex-column">
                <p class="h5 mb-5 alert alert-danger">En attente</p>
                <%for(var j=0;j<tasks.length;j++){ if(tasks[j].statut=='En attente' ){%>
                  <div class="card  taskCard  mb-1 mr-2 p-1" id="<%=tasks[j]._id%>">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item d-flex flex-column  p-0 pt-1 taskInfos ">
                        <div class="col d-flex justify-content-between">
                          <p class="storyIdTitle font-weight-bold">Tâche</p>
                          <p class="storyIdValue">
                            <%=j+1%>
                          </p>
                        </div>
                        <div class="col">
                          <p class="storyEstimatioTitle font-weight-bold">Descritption</p>
                          <p class="storyEstimationValue">
                            <%=tasks[j].description%>
                          </p>
                        </div>
                        <div class="col">
                          <button name="" id="" class="btn btn-primary float-right showUserStoryBtn" data-toggle="modal"
                            data-target="#exampleModal" onclick="showUserStory('<%=tasks[j].identifiantUserStory%>')"
                            role="button">Détails de l'user story<i class="bi bi-box-arrow-up-right ml-2"></i></button>
                        </div>
                      </li>
                    </ul>
                  </div>
                  <%}}%>
              </div>
            </div>
            <div class="col d-flex flex-column progressionTasks  dropZone" id="En progression">
              <div class="col tasksTitle m-0 d-flex flex-column">
                <p class="h5 mb-5 alert alert-info">En progression</p>
                <%for(var j=0;j<tasks.length;j++){ if(tasks[j].statut=='En progression' ){%>
                  <div class="card  taskCard  mb-1 mr-2 p-1" id="tasks[j]._id">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item d-flex flex-column  p-0 pt-1 taskInfos ">
                        <div class="col d-flex justify-content-between">
                          <p class="storyIdTitle font-weight-bold">Tâche</p>
                          <p class="storyIdValue">
                            <%=j+1%>
                          </p>
                        </div>
                        <div class="col">
                          <p class="storyEstimatioTitle font-weight-bold">Descritption</p>
                          <p class="storyEstimationValue">
                            <%=tasks[j].description%>
                          </p>
                        </div>
                        <div class="col">
                          <button name="" id="" class="btn btn-primary float-right showUserStoryBtn" data-toggle="modal"
                            data-target="#exampleModal" onclick="showUserStory('<%=tasks[j].identifiantUserStory%>')"
                            role="button">Détails de l'user story<i class="bi bi-box-arrow-up-right ml-2"></i></button>
                        </div>
                      </li>
                    </ul>
                  </div>
                  <%}}%>
              </div>
            </div>
            <div class="col d-flex flex-column donetasks  dropZone" id="terminé">
              <div class="col tasksTitle m-0 d-flex flex-column ">
                <p class="h5 mb-5 alert alert-primary ">Terminé</p>
                <%for(var j=0;j<tasks.length;j++){ if(tasks[j].statut=='terminé' ){%>
                  <div class="card  taskCard  mb-1 mr-2 p-1" id="tasks[j]._id">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item d-flex flex-column  p-0 pt-1 taskInfos ">
                        <div class="col d-flex justify-content-between">
                          <p class="storyIdTitle font-weight-bold">Tâche</p>
                          <p class="storyIdValue">
                            <%=j+1%>
                          </p>
                        </div>
                        <div class="col">
                          <p class="storyEstimatioTitle font-weight-bold">Descritption</p>
                          <p class="storyEstimationValue">
                            <%=tasks[j].description%>
                          </p>
                        </div>
                        <div class="col">
                          <button name="" id="" class="btn btn-primary float-right showUserStoryBtn" data-toggle="modal"
                            data-target="#exampleModal" onclick="showUserStory('<%=tasks[j].identifiantUserStory%>')"
                            role="button">Détails de l'user story<i class="bi bi-box-arrow-up-right ml-2"></i></button>
                        </div>
                      </li>
                    </ul>
                  </div>
                  <%}}%>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Détails de l'user Story</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <ul class="list-group list-group-flush">
            <li class="list-group-item d-flex  p-0 pt-1 userStoryInfos ">
              <div class="col">
                <p class="storyIdTitle font-weight-bold">Identifiant</p>
                <p class="userStoryIdValue">test</p>
              </div>
              <div class="col">
                <p class="storyEstimatioTitle font-weight-bold">Estimation</p>
                <p class="storyEstimationValue">test</p>
              </div>
            </li>
            <li class="list-group-item userStoryValues m-0 p-0">
              <div class="col">
                <p class="storyActorTitle font-weight-bold">En Tant que </p>
                <p class="storyActorValue">test</p>
                <p class="storyActionTitle font-weight-bold">Je souhaite </p>
                <p class="storyActionValue">test</p>
                <p class="storyGoalTitle font-weight-bold">Afin que </p>
                <p class="storyGoalValue">test</p>
              </div>
            </li>
            <li class="list-group-item storyAcceptance m-0 p-0">
              <div class="col p-1 pl-3 m-0">
                <p class="storyAAccceptanceTitle font-weight-bold">Critères d'acceptation</p>
                <p class="storyAcceptanceValue">test</p>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</body>
<script src="/assets/js/dragTasks.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

</html>