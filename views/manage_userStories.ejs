<!DOCTYPE html>
<html lang="fr">
<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Collaboro | User Stories</title>
  <link rel="stylesheet" href="/assets/css/style.css">
  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/assets/js/navbar.js" ></script>
</head>
<body >
  <div class="container-scroller  ">
    <nav class="navbar  fixed-top navbar-light shadow-sm  d-flex  align-items-center ">
    <a class="navbar-brand " href="/dashboard">
      <img src="/assets/img/logo.png"  class="d-inline-block align-top"> </a>
      <ul class="nav justify-content-end ">
        <li class="nav-item navbar-item">
          <a class="nav-link count-indicator " href="/chat">
            <i class="bi bi-envelope-fill mr-5 "></i>
            <span class="count1"></span>
          </a>
        </li>
        <li class="nav-item navbar-item">
          <a class="nav-link count-indicator " href="/notification">
            <i class="bi bi-bell-fill mr-4 "></i>
            <span class="count"></span>
          </a>
        </li>
        <li class="nav-item  mr-5 navbar-item">
          <a class="nav-link profile-photo " href="/EditMyProfile/<%= data._id%>"><img src="<%=data.photo%>">
          </a>
        </li>

      
      </ul>
  </nav>
    <!--navbar end-->
    <div class="container-fluid page-body-wrapper">
      <!--sidebar start-->
      <nav class="sidebar shadow flex-row align-items-start mx-0 px-0  " id="sidebar">
    <ul class="nav" id="sidebar">
      <li class="nav-item nav-link">
          <button onclick="toggleNavbar()" class="btn btn-lg  " id="btnToggler"><i class="bi bi-arrow-return-left"></i></button>
      </li>
      <li class="nav-item  ">
        <a class="nav-link" href="/dashboard">
          <i class="bi bi-grid"></i>
          <span class="menu-title mx-2">Acceuil</span>
        </a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" data-toggle="collapse" href="/projets"  >
          <i class="bi bi-code-square"></i>
          <span class="menu-title mx-2 ">Projets</span>
        </a>
      </li>
      <li class="nav-item ">
        <a class="nav-link" data-toggle="collapse" href="/sprints"  >
          <i class="bi bi-code-square"></i>
          <span class="menu-title mx-2 ">Sprints</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="/taches" >
          <i class="bi bi-list-task"></i>
          <span class="menu-title mx-2">Tâches</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="/meeting">
          <i class="bi bi-camera-video"></i>
          <span class="menu-title mx-2 ">Meeting</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="/chat">
          <i class="bi bi-chat-left"></i>
          <span class="menu-title mx-2">Chat</span>
        </a>
      </li>
      <li class="nav-item ">
        <a class="nav-link" data-toggle="collapse" href="/notification">
          <i class="bi bi-bell"></i>
          <span class="menu-title mx-2">Notification</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="/EditMyProfile">
          <i class="bi bi-people"></i>
          <span class="menu-title mx-2">Profil</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="/documentation">
          <i class="bi bi-book"></i>
          <span class="menu-title mx-2">Documentation</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="/logout">
          <i class="bi bi-box-arrow-left"></i>
          <span class="menu-title mx-2">Déconnexion</span>
        </a>
      </li>
    </ul>
</nav>

      <nav class="mobile-sidebar shadow  flex-row align-items-start mx-0 px-0    " id="mobile-sidebar">
    <ul class="nav" >
      <li class="nav-item">
        <button onclick="toggleNavbar()" class="btn btn-lg " id="btnToggler"><i class="bi bi-arrow-return-right"></i></button>
      </li>
      <li class="nav-item  ">
        <a class="nav-link" href="/dashboard">
          <i class="bi bi-grid"></i>
        </a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" data-toggle="collapse" href="/projets"  >
          <i class="bi bi-code-square"></i>
        </a>
      </li>
      <li class="nav-item ">
        <a class="nav-link" data-toggle="collapse" href="/sprints"  >
          <i class="bi bi-arrow-repeat"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="/taches" >
          <i class="bi bi-list-task"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="/meeting">
          <i class="bi bi-camera-video"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="/chat">
          <i class="bi bi-chat-left"></i>
        </a>
      </li>
      <li class="nav-item ">
        <a class="nav-link" data-toggle="collapse" href="/notification">
          <i class="bi bi-bell"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="/EditMyProfile">
          <i class="bi bi-people"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="/documentation">
          <i class="bi bi-book"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="/logout">
          <i class="bi bi-box-arrow-left"></i>
        </a>
      </li>
    </ul>
</nav>
        <!--sidebar end-->
         <!--sidebar end-->
         <div class=" container-fluid main-panel" id="main-panel-home" >
          <div class="content-wrapper" id="main-panel-wrapper">
            <!--First row start-->
            <div class="row mt-2">
                <div class="col-md-6 col-sm-12 h5 text-left">
                   <p class="ml-4"><span class="PageTitle">Titre de Projet :</span> <span style="color:#00C899;"><%=projet.titre%></span></p> 
                   <p class="d-none projetId"><%=projet._id%></p>
                </div>  
                <div class="col-md-6 col-sm-12 d-flex justify-content-end">
                  <button type="button" class="btn btn-primary mr-2 text-light <%=isPo%>" onclick="createNewUserStory()">Nouvelle User Story<i class="bi bi-plus "></i></button>      
                  <button type="button" class="btn btn-warning text-light mr-2 <%=isPo%>" onclick="toggleModification()" id="modifyUserStories">Modifier<i class="bi bi-list-ol ml-2 "></i></button>
                  <a   class="btn btn-info p-2" href="/project/showProductBacklog/<%=projet._id%>">Product Backlog<i class="bi bi-layers ml-2 "></i></a>
                </div>
              </div>
              <div class="row mt-2 justify-content-center userStories">
               <%if(stories.length>0)
               {
              for(var i=0;i<stories.length;i++)
              {%>
                <div class="card  userStoryCard  mb-1 mr-2 p-1" id="<%=stories[i]._id%>">
                  <ul class="list-group list-group-flush">
                    <li class="col  p-0 pt-1 userStoryTools justify-content-between">
                      <button type="button" class="btn modifyUserStory text-warning " ><i class="bi bi-gear"></i></button>
                      <span class="tools"><button type="button" class="btn " onclick="minusOrder(event)" id="<%=stories[i]._id%>" ><i class="bi bi-dash-lg"></i></button><span id="orderValue" >Priorité <span class="USID"><%=stories[i].priorite%></span></span><button type="button" class="btn " onclick="plusOrder(event)" id="<%=stories[i]._id%>"><i class="bi bi-plus-lg"></i></button></span>
                      <button type="button" class="btn deleteUserStory text-danger"  id="<%=stories[i].priorite%>"  ><i class="bi bi-trash"></i></button>
                    </li>
                    <li class="list-group-item d-flex  p-0 pt-1 userStoryInfos ">
                          <div class="col">
                            <p class="storyIdTitle font-weight-bold">Identifiant</p>
                            <p class="storyIdValue"><%=i+1%></p>
                          </div>
                          <div class="col">
                            <p class="storyEstimatioTitle font-weight-bold">Estimation</p>
                            <p class="storyEstimationValue"><%=stories[i].estimation%></p>
                          </div>
                          
                    </li>
                    <li class="list-group-item userStoryValues m-0 p-0">
                        <div class="col">
                          <p class="storyActorTitle font-weight-bold">En Tant que </p>
                          <p class="storyActorValue"><%=stories[i].acteur%></p>
                          <p class="storyActionTitle font-weight-bold">Je souhaite </p>
                          <p class="storyActionValue"><%=stories[i].action%></p>
                          <p class="storyGoalTitle font-weight-bold">Afin que </p>
                          <p class="storyGoalValue"><%=stories[i].objectif%></p>
                          <a type="button" href="/api/userStories/viewTaskList/<%=stories[i]._id%>" class="btn btn-primary viewTaskList m-0 p-2 <%if(data._id==projet.identifiantProductOwner){%>d-none<%}%>"><span class="buttonText">Listes des tâches</span><i class="bi bi-arrow-bar-right ml-1 p-1"></i></a>
                        </div>
                    </li>
                    <li class="list-group-item storyAcceptance m-0 p-0">
                      <div class="col p-1 pl-3 m-0"><p class="storyAAccceptanceTitle font-weight-bold">Critères d'acceptation</p>
                        <p class="storyAcceptanceValue"><%=stories[i].acceptanceCriteria%></p>
                      </div>
                    </li>
                  </ul>
                </div>
              <%}
               }
               %>
               
               
                  <div class="card d-none userStoryCard userStoryCardModelShow  mb-1 mr-2 p-1" id="">
                    <ul class="list-group list-group-flush">
                      <li class="col  p-0 pt-1 userStoryTools justify-content-between">
                        <button type="button" class="btn modifyUserStory text-warning " ><i class="bi bi-gear"></i></button>
                        <span class="tools"><button type="button" class="btn orderMoins" ><i class="bi bi-dash-lg"></i></button><span id="orderValue" >Priorité <span class="USID">1</span></span><button type="button" class="btn orderPlus"><i class="bi bi-plus-lg"></i></button></span>
                        <button type="button" class="btn deleteUserStory text-danger"  id="hello"  ><i class="bi bi-trash"></i></button>
                      </li>
                      <li class="list-group-item d-flex  p-0 pt-1 userStoryInfos ">
                            <div class="col">
                              <p class="storyIdTitle font-weight-bold">Identifiant</p>
                              <p class="storyIdValue">identifiant</p>
                            </div>
                            <div class="col">
                              <p class="storyEstimatioTitle font-weight-bold">Estimation</p>
                              <p class="storyEstimationValue">valeur</p>
                            </div>
                           
                            
                      </li>
                      <li class="list-group-item userStoryValues m-0 p-0">
                        <div class="col">
                          <p class="storyActorTitle font-weight-bold">En Tant que </p>
                          <p class="storyActorValue">Lorem ipsum dolor sit amet.</p>
                          <p class="storyActionTitle font-weight-bold">Je souhaite </p>
                          <p class="storyActionValue">Lorem ipsum dolor sit amet.</p>
                          <p class="storyGoalTitle font-weight-bold">Afin que </p>
                          <p class="storyGoalValue">Lorem ipsum dolor sit amet.</p>
                        </div>
                      </li>
                      <li class="list-group-item storyAcceptance m-0 p-0">
                        <div class="col p-1 pl-3 m-0"><p class="storyAccceptanceTitle font-weight-bold">Critères d'acceptation</p>
                          <p class="storyAcceptanceValue">Lorem ipsum dolor sit amet.</p>
                        </div>
                      </li>
                    </ul>
                  </div>
                  <div class="card  userStoryCard userStoryCardModel d-none  mb-1 mr-2 p-1" id="">
                    <ul class="list-group list-group-flush">
                      <li class="col  p-0 pt-1 userStoryTools justify-content-between">
                        <button type="button" class="btn modifyUserStory text-warning" onclick="updateUserStory(event)"><i class="bi bi-gear"></i></button>
                        <span class="tools"><button type="button" class="btn " onclick="minusOrder(event)" ><i class="bi bi-dash-lg"></i></button><span id="orderValue" >Priorité <span class="USID">1</span></span><button type="button" class="btn"onclick="plusOrder(event)"><i class="bi bi-plus-lg"></i></button></span>
                        <button  class="btn deleteUserStory text-danger" ><i class="bi bi-trash"></i></button>
                      </li>
                      <li class="list-group-item d-flex  p-0 pt-1 userStoryInfos ">
                            <div class="col">
                              <p class="storyIdTitle font-weight-bold">Identifiant</p>
                              <p class="storyIdentifier">Identifiant</p>
                            </div>
                            <div class="col">
                              <p class="storyEstimatioTitle font-weight-bold">Estimation</p>
                              <p class="storyEstimationValue"><input type="text" name="estimation" class="form-control estimation" id="estimation"></p>
                            </div>
                            
                      </li>
                      <li class="list-group-item userStoryValues m-0 p-0">
                        <div class="col">
                          <p class="storyActorTitle font-weight-bold">En Tant que </p>
                          <p class="storyActorValue"><input type="text" name="storyActor" class="form-control storyActor"  id="storyActor"></p>
                          <p class="storyActionTitle font-weight-bold">Je souhaite </p>
                          <p class="storyActionValue"><input type="text" name="storyAction" class="form-control storyAction" id="storyAction"></p>
                          <p class="storyGoalTitle font-weight-bold">Afin que </p>
                          <p class="storyGoalValues"><input type="text" name="storyGoalValue" class="form-control storyGoalValue" id="storyGoalValue"></p>
                        </div>
                      </li>
                      <li class="list-group-item storyAcceptance m-0 p-0">
                        <div class="col p-1 pl-3 m-0"><p class="storyAAccceptanceTitle font-weight-bold">Critères d'acceptation</p>
                          <p class="storyAcceptanceValue"><input type="text" name="acceptanceCriteria" class="form-control acceptnceCriteria " id="acceptnceCriteria"></p>
                        </div>
                      </li>
                        <div class="col justify-content-center d-flex">
                          <button   type="button" class="btn btn-success saveNewUserStory text-light mt-2" onclick="saveNewUserStory(event)" ><i class="bi bi-check2" ></i>Créer</button>
                        </div>
                    </ul>
                  </div>
               

                  

              </div>
              

         </div>
          
       </div>
  </div>
  </div>
</body>
<script src="/assets/js/DecorateStories.js" ></script>
<script src="/assets/js/ManageStories.js" ></script>

</html>